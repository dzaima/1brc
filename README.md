# [1BRC](https://github.com/gunnarmorling/1brc) solution with [Singeli](https://github.com/mlochbaum/Singeli)

Java version can be built & run with `make run file=path/to/measurements.txt`, or your favorite way of building & running `Main.java`+`Gen.java` (needs Java 21 & `--add-modules=jdk.incubator.vector --enable-preview -Djdk.incubator.vector.VECTOR_ACCESS_OOB_CHECK=0`).

C version can be built with `make a.out` and then run with `./a.out [path/to/measurements.txt]`.

By default, the code is configured to use 8 threads. A different count can be chosen with a `THREADS_1BRC=123` environment variable.

The repo comes with `Gen.java` and `gen.c` pre-generated, but they can be regenerated by adding `GEN=1` to the `make` invocation of the desired target. This'll need:

- The path to the Singeli repo in `SINGELI_PATH`;
- `bqn` as [CBQN](https://github.com/dzaima/CBQN).